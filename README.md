# üè• Comparador de Pedidos y Cat√°logos - Hospital Infanta Margarita

<div align="center">

![Angular](https://img.shields.io/badge/Angular-18-red?style=for-the-badge&logo=angular)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=for-the-badge&logo=typescript)
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-3.0-38B2AC?style=for-the-badge&logo=tailwind-css)
![Flowbite](https://img.shields.io/badge/Flowbite-2.0-1E40AF?style=for-the-badge&logo=flowbite)

**Aplicaci√≥n web para optimizar la gesti√≥n de inventarios hospitalarios**

[üöÄ Demo](#demo) ‚Ä¢ [üìñ Documentaci√≥n](#documentaci√≥n) ‚Ä¢ [üõ†Ô∏è Instalaci√≥n](#instalaci√≥n) ‚Ä¢ [üí° Uso](#uso)

</div>

---

## üìã Tabla de Contenidos

- [üéØ Descripci√≥n](#-descripci√≥n)
- [‚ú® Caracter√≠sticas](#-caracter√≠sticas)
- [üèóÔ∏è Arquitectura](#Ô∏è-arquitectura)
- [üõ†Ô∏è Tecnolog√≠as](#Ô∏è-tecnolog√≠as)
- [üì¶ Instalaci√≥n](#-instalaci√≥n)
- [üöÄ Uso](#-uso)
- [üìä Ejemplos](#-ejemplos)
- [üîß API Interna](#-api-interna)
- [ü§ù Contribuci√≥n](#-contribuci√≥n)
- [üìÑ Licencia](#-licencia)

---

## üéØ Descripci√≥n

El **Comparador de Pedidos y Cat√°logos** es una aplicaci√≥n web desarrollada para el Hospital Infanta Margarita que permite comparar eficientemente los cat√°logos de almac√©n con las l√≠neas de pedidos realizadas por los diferentes servicios hospitalarios.

### Problema que resuelve

Los hospitales manejan miles de productos en sus cat√°logos, pero no todos son utilizados regularmente en los pedidos de los servicios. Esta aplicaci√≥n identifica autom√°ticamente:

- ‚úÖ Productos del cat√°logo que **no est√°n siendo pedidos**
- üîç Discrepancias entre inventario te√≥rico y demanda real
- üìä Oportunidades de **optimizaci√≥n de inventario**
- üßπ Generaci√≥n de **cat√°logos depurados** autom√°ticamente

---

## ‚ú® Caracter√≠sticas

### üîÑ Gesti√≥n de Archivos
- **üìÇ Carga de cat√°logo**: Soporte para archivos Excel (.xlsx, .xls)
- **üìã M√∫ltiples archivos de pedidos**: Consolidaci√≥n autom√°tica
- **‚úÖ Validaci√≥n de estructura**: Verificaci√≥n de columnas consistentes
- **üîç Procesamiento inteligente**: Extracci√≥n autom√°tica de datos y columnas

### üéØ Comparaci√≥n Avanzada
- **üîó Comparaci√≥n flexible**: Selecci√≥n libre de columnas a comparar
- **üè∑Ô∏è Informaci√≥n enriquecida**: Muestra c√≥digo + nombre del producto
- **üîÑ Normalizaci√≥n autom√°tica**: Ignora may√∫sculas/espacios para comparaciones precisas
- **üìà Estad√≠sticas en tiempo real**: Contadores de registros procesados

### üì§ Exportaci√≥n y Descarga
- **üìä Exportar resultados**: Lista de productos no encontrados en CSV
- **üßπ Cat√°logo limpio**: Genera Excel sin productos no utilizados
- **üìã Formato enriquecido**: Incluye c√≥digos y nombres de productos
- **üíæ Preservaci√≥n de formato**: Mantiene el tipo de archivo original

### üé® Experiencia de Usuario
- **üåì Tema claro/oscuro**: Interfaz adaptativa
- **üì± Dise√±o responsive**: Optimizado para m√≥viles y desktop
- **üîî Notificaciones elegantes**: Toasts informativos con Flowbite
- **‚ö° Interfaz reactiva**: Actualizaciones en tiempo real con Angular Signals

---

## üèóÔ∏è Arquitectura

```mermaid
graph TB
    A[üìÅ Archivos Excel] --> B[üîç Procesador SheetJS]
    B --> C[üìä Extractor de Datos]
    C --> D[üîÑ Validador de Columnas]
    D --> E[üíæ Consolidador de Datos]
    E --> F[‚ö° Angular Signals]
    F --> G[üéØ Motor de Comparaci√≥n]
    G --> H[üìà Resultados]
    H --> I[üì§ Exportador]
    I --> J[üíæ Archivos Generados]
    
    style A fill:#e1f5fe
    style F fill:#f3e5f5
    style G fill:#fff3e0
    style J fill:#e8f5e8
```

### Componentes Principales

| Componente | Responsabilidad | Tecnolog√≠a |
|------------|-----------------|------------|
| **FileProcessor** | Lectura y procesamiento de Excel | SheetJS (xlsx) |
| **DataValidator** | Validaci√≥n de estructura de columnas | TypeScript |
| **ComparisonEngine** | L√≥gica de comparaci√≥n inteligente | Angular Signals |
| **ExportManager** | Generaci√≥n de archivos de salida | SheetJS + Browser APIs |
| **ToastSystem** | Sistema de notificaciones | Flowbite |
| **UIComponents** | Interfaz de usuario reactiva | Angular + Tailwind CSS |

---

## üõ†Ô∏è Tecnolog√≠as

### Frontend
- **[Angular 18](https://angular.io/)** - Framework principal con Standalone Components
- **[TypeScript 5.0+](https://www.typescriptlang.org/)** - Tipado est√°tico y desarrollo robusto
- **[Tailwind CSS 3.0](https://tailwindcss.com/)** - Framework de utilidades CSS
- **[Flowbite](https://flowbite.com/)** - Componentes UI y sistema de notificaciones

### Librer√≠as Especializadas
- **[SheetJS (xlsx)](https://github.com/SheetJS/sheetjs)** - Procesamiento de archivos Excel
- **[Angular Signals](https://angular.io/guide/signals)** - Gesti√≥n de estado reactiva

### Herramientas de Desarrollo
- **[Vite](https://vitejs.dev/)** - Build tool y desarrollo r√°pido
- **[ESLint](https://eslint.org/)** - Linting de c√≥digo
- **[Prettier](https://prettier.io/)** - Formateo autom√°tico

---

## üì¶ Instalaci√≥n

### Prerrequisitos

- **Node.js** (versi√≥n 18.0 o superior)
- **npm** (versi√≥n 9.0 o superior)
- **Git** (para clonar el repositorio)

### Pasos de Instalaci√≥n

1. **Clonar el repositorio**
```bash
git clone https://github.com/fmangom292/pedidos-hospital.git
cd pedidos-hospital
```

2. **Instalar dependencias**
```bash
npm install
```

3. **Configurar Tailwind CSS**
```bash
# El proyecto ya incluye la configuraci√≥n necesaria
# Verificar que tailwind.config.js est√© presente
```

4. **Iniciar el servidor de desarrollo**
```bash
npm start
```

5. **Abrir en el navegador**
```
http://localhost:4200
```

### Scripts Disponibles

| Script | Comando | Descripci√≥n |
|--------|---------|-------------|
| **Desarrollo** | `npm start` | Servidor de desarrollo con hot-reload |
| **Build** | `npm run build` | Compilaci√≥n para producci√≥n |
| **Test** | `npm test` | Ejecutar pruebas unitarias |
| **Lint** | `npm run lint` | Verificar calidad de c√≥digo |

---

## üöÄ Uso

### 1. üìÇ Cargar Archivo de Cat√°logo

1. Haz clic en **"Cargar archivo CAT√ÅLOGO"**
2. Selecciona un archivo Excel (.xlsx o .xls)
3. El sistema procesar√° autom√°ticamente y mostrar√° las columnas disponibles

### 2. üìã Cargar Archivos de L√≠neas de Pedido

1. Haz clic en **"Cargar archivos L√çNEAS DE PEDIDO"**
2. Selecciona uno o m√∫ltiples archivos Excel
3. El sistema validar√° que todos tengan la misma estructura
4. Los datos se consolidar√°n autom√°ticamente

### 3. üîç Configurar Comparaci√≥n

1. Selecciona la **columna del cat√°logo** a comparar
2. Selecciona la **columna de l√≠neas de pedido** correspondiente
3. Haz clic en **"Comparar Columnas"**

### 4. üìä Ver Resultados

Los resultados mostrar√°n:
- **Productos no encontrados**: En formato `{c√≥digo} - {nombre}`
- **Estad√≠sticas**: Cantidad de registros procesados
- **Estado visual**: Indicadores de √©xito/error

### 5. üì§ Exportar Resultados

- **üìÑ CSV de faltantes**: Lista de productos no encontrados
- **üßπ Cat√°logo limpio**: Excel sin productos no utilizados

---

## üìä Ejemplos

### Ejemplo 1: Comparaci√≥n B√°sica

**Archivo Cat√°logo:**
| C√≥digo | Nombre | Precio |
|--------|--------|--------|
| A1234 | Paracetamol 500mg | 2.50 |
| B5678 | Ibuprofeno 400mg | 3.20 |
| C9101 | Amoxicilina 750mg | 8.90 |

**Archivo Pedidos:**
| C√≥digo Producto | Cantidad | Servicio |
|-----------------|----------|----------|
| A1234 | 100 | Urgencias |
| C9101 | 50 | Pediatr√≠a |

**Resultado:**
```
üîç Valores no encontrados:
B5678 - Ibuprofeno 400mg
```

### Ejemplo 2: M√∫ltiples Archivos de Pedidos

**Pedidos Enero:**
- A1234 (Urgencias)
- C9101 (Pediatr√≠a)

**Pedidos Febrero:**
- A1234 (Cirug√≠a)
- D4567 (Cardiolog√≠a)

**Consolidado:**
- A1234, C9101, D4567

**Productos del cat√°logo no pedidos:**
- B5678 - Ibuprofeno 400mg

---

## üîß API Interna

### Signals Principales

```typescript
// Archivos y datos
catalogoFile: Signal<File | null>
lineasFiles: Signal<File[]>
catalogoData: Signal<any[]>
lineasData: Signal<any[]>

// Columnas
catalogoColumns: Signal<string[]>
lineasColumns: Signal<string[]>

// Comparaci√≥n
selectedCatalogoColumn: Signal<string>
selectedLineasColumn: Signal<string>
comparisonResults: Signal<{campo: string, nombre: string, displayText: string}[]>

// Estados
isProcessing: Signal<boolean>
isComparing: Signal<boolean>
lineasFilesValid: Signal<boolean>
```

### M√©todos Principales

```typescript
// Gesti√≥n de archivos
onCatalogFileSelected(event: Event): void
onLineasFilesSelected(event: Event): void
processExcelFile(file: File, type: 'catalogo' | 'lineas'): void

// Comparaci√≥n
compareColumns(): void
clearComparison(): void

// Exportaci√≥n
exportResults(): void
exportCleanCatalog(): void

// Utilidades
showToast(type: ToastType, title: string, message: string, duration?: number): void
```

### Tipos de Datos

```typescript
interface ComparisonResult {
  campo: string;        // C√≥digo del producto
  nombre: string;       // Nombre/descripci√≥n del producto
  displayText: string;  // Texto formateado "{campo} - {nombre}"
}

interface ProcessedFileInfo {
  file: File;
  data: any[];
  columns: string[];
  processed: boolean;
  error?: string;
}

type ToastType = 'success' | 'error' | 'warning' | 'info';
```

---

## üéØ Casos de Uso Hospitalarios

### üè• Gesti√≥n de Inventario Farmac√©utico
- Identificar medicamentos en cat√°logo que no se est√°n pidiendo
- Optimizar stock reduciendo productos obsoletos
- Detectar discrepancias entre teor√≠a y pr√°ctica

### üî¨ Material M√©dico-Quir√∫rgico
- Comparar instrumental disponible vs. utilizado
- Identificar material infrautilizado
- Planificar compras basadas en demanda real

### ü©∫ Equipamiento por Servicios
- Analizar uso de equipos por servicio hospitalario
- Detectar necesidades no cubiertas
- Optimizar distribuci√≥n de recursos

---

## üõ†Ô∏è Desarrollo

### Estructura del Proyecto

```
pedidos-hospital/
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ app.ts              # Componente principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ app.html            # Template principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ app.scss            # Estilos del componente
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ app.config.ts       # Configuraci√≥n de la app
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ app.routes.ts       # Rutas (futuro)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ main.ts                 # Bootstrap de la aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ index.html              # HTML principal
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ styles.scss             # Estilos globales
‚îú‚îÄ‚îÄ üìÅ public/
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ favicon.ico             # Icono de la aplicaci√≥n
‚îú‚îÄ‚îÄ üìÑ angular.json                # Configuraci√≥n de Angular
‚îú‚îÄ‚îÄ üìÑ tailwind.config.js          # Configuraci√≥n de Tailwind
‚îú‚îÄ‚îÄ üìÑ tsconfig.json               # Configuraci√≥n de TypeScript
‚îú‚îÄ‚îÄ üìÑ package.json                # Dependencias y scripts
‚îî‚îÄ‚îÄ üìÑ README.md                   # Este archivo
```

### Comandos de Desarrollo

```bash
# Desarrollo
npm start                    # Servidor de desarrollo
npm run build               # Build de producci√≥n
npm run build:watch         # Build con watch mode

# Calidad de c√≥digo  
npm run lint               # Linting
npm run lint:fix           # Fix autom√°tico de linting
npm test                   # Pruebas unitarias
npm run test:coverage      # Cobertura de tests

# Utilidades
npm run analyze            # An√°lisis del bundle
npm run serve:dist         # Servir build de producci√≥n
```

---

## üìà M√©tricas y Rendimiento

### üöÄ Rendimiento
- **Tiempo de carga**: < 2 segundos
- **Procesamiento de Excel**: < 5 segundos para archivos de 10k filas
- **Comparaci√≥n**: < 1 segundo para datasets t√≠picos hospitalarios
- **Tama√±o del bundle**: < 500KB (gzipped)

### üìä Capacidades
- **Archivos Excel**: Hasta 100MB por archivo
- **Registros por archivo**: Hasta 1M de filas
- **Archivos m√∫ltiples**: Hasta 50 archivos simult√°neos
- **Columnas soportadas**: Ilimitadas

### üîí Seguridad
- **Procesamiento local**: Los archivos nunca salen del navegador
- **Sin backend**: No hay env√≠o de datos sensibles
- **Validaci√≥n de entrada**: Verificaci√≥n de tipos de archivo
- **Sanitizaci√≥n**: Limpieza de datos de entrada

---

## ü§ù Contribuci√≥n

¬°Las contribuciones son bienvenidas! Por favor, sigue estos pasos:

### 1. Fork del Proyecto
```bash
git clone https://github.com/tu-usuario/pedidos-hospital.git
cd pedidos-hospital
```

### 2. Crear Rama de Feature
```bash
git checkout -b feature/nueva-funcionalidad
```

### 3. Realizar Cambios
- Seguir las convenciones de c√≥digo existentes
- A√±adir documentaci√≥n JSDoc
- Incluir pruebas si es necesario

### 4. Commit y Push
```bash
git commit -m "feat: a√±adir nueva funcionalidad"
git push origin feature/nueva-funcionalidad
```

### 5. Crear Pull Request
- Describir los cambios realizados
- Incluir capturas de pantalla si aplica
- Referenciar issues relacionados

### Convenciones

- **Commits**: Usar [Conventional Commits](https://conventionalcommits.org/)
- **C√≥digo**: Seguir las reglas de ESLint configuradas
- **Documentaci√≥n**: JSDoc para todos los m√©todos p√∫blicos
- **Estilos**: Tailwind CSS √∫nicamente

---

## üìû Soporte

### üêõ Reportar Bugs
- Usar el [sistema de issues](https://github.com/fmangom292/pedidos-hospital/issues)
- Incluir pasos para reproducir el error
- Adjuntar capturas de pantalla si es posible

### üí° Solicitar Features
- Describir el caso de uso hospitalario
- Explicar el beneficio esperado
- Proporcionar ejemplos si es posible

### üìß Contacto
- **Email**: fmangom292@gmail.com

---

## üìÑ Licencia

Este proyecto est√° licenciado bajo la **Licencia MIT** - ver el archivo [LICENSE](LICENSE) para detalles.

```
Copyright (c) 2025 Hospital Infanta Margarita

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
```

---

## üåü Agradecimientos

- **Equipo de Sistemas** - Hospital Infanta Margarita
- **Comunidad Angular** - Por el excelente framework
- **Tailwind Labs** - Por el sistema de dise√±o
- **SheetJS** - Por la librer√≠a de procesamiento Excel
- **Flowbite** - Por los componentes UI

---

<div align="center">

**Desarrollado con ‚ù§Ô∏è para el Hospital Infanta Margarita**

[üîù Volver al inicio](#-comparador-de-pedidos-y-cat√°logos---hospital-infanta-margarita)

</div>